<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Game T√†i X·ªâu Casino</title>
<style>
/* ===== Body & Owner ===== */
body{
  background: linear-gradient(to bottom,#8b0000,#000);
  color:#fff;
  font-family:'Arial Black', sans-serif;
  text-align:center;
  margin:0;
  padding:0;
}
#owner{
  position:fixed;
  top:10px;
  left:10px;
  font-weight:bold;
  font-size:20px;
  color:#ffd700;
  text-shadow:2px 2px 4px #000;
  z-index:999;
}

/* ===== Panels ===== */
#loginPanel, #gamePanel{padding:20px;}
input, button{padding:8px;margin:5px;border-radius:5px;border:none;}
button{cursor:pointer;transition:0.2s;}
button:hover{opacity:0.8;}
#wallet{font-size:20px;margin:10px;}
#selectedBet{margin:10px;font-weight:bold;}

/* ===== Dice ===== */
#diceArea{margin:20px;display:flex;justify-content:center;gap:15px;}
.dice{
  width:90px;
  height:90px;
  background:#fff;
  border-radius:15px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  color:#000;
  box-shadow:0 5px 15px rgba(0,0,0,0.7),0 0 5px #ffd700 inset;
  transition:transform 0.5s;
}

/* ===== Chips ===== */
#chipArea{margin:15px;}
.chip{
  width:75px;
  height:75px;
  border-radius:50%;
  margin:10px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  color:#fff;
  cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,0.5),0 0 0 2px #fff inset;
  border:2px solid #fff;
  font-size:18px;
  text-shadow:0 2px 2px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
}
.chip:hover{transform: scale(1.3) rotateY(10deg);box-shadow:0 6px 12px rgba(0,0,0,0.7),0 0 0 2px #ffd700 inset;}
.chip.selected{border:3px solid #ffd700;box-shadow:0 6px 14px rgba(0,0,0,0.8),0 0 8px #ffd700 inset;transform:scale(1.35);}

/* ===== Chip Colors ===== */
.chip[data-value="1000"]{background:linear-gradient(145deg,#4caf50,#087f23);}
.chip[data-value="5000"]{background:linear-gradient(145deg,#2196f3,#0d47a1);}
.chip[data-value="10000"]{background:linear-gradient(145deg,#ff9800,#e65100);}
.chip[data-value="50000"]{background:linear-gradient(145deg,#e91e63,#880e4f);}
.chip[data-value="1000000"]{background:linear-gradient(145deg,#ffeb3b,#fbc02d);}
.chip[data-value="2000000"]{background:linear-gradient(145deg,#ff9800,#f57c00);}
.chip[data-value="5000000"]{background:linear-gradient(145deg,#e91e63,#c2185b);}

/* ===== Effects ===== */
.flash-win{animation:flashWin 0.5s;}
.flash-lose{animation:flashLose 0.5s;}
@keyframes flashWin{0%{background:#121212;}50%{background:#2e7d32;}100%{background:#121212;}}
@keyframes flashLose{0%{background:#121212;}50%{background:#b71c1c;}100%{background:#121212;}}

/* ===== Admin Panel ===== */
#adminPanel{margin-top:20px;border-top:1px solid #fff;padding-top:10px;display:none;}
textarea{width:300px;height:100px;}
</style>
</head>
<body>
<div id="owner">lowt</div>

<!-- ===== Login/Register ===== -->
<div id="loginPanel">
<h2>ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h2>
<input type="text" id="username" placeholder="T√™n ƒëƒÉng nh·∫≠p">
<input type="password" id="password" placeholder="M·∫≠t kh·∫©u">
<br>
<button onclick="login()">ƒêƒÉng nh·∫≠p</button>
<button onclick="register()">ƒêƒÉng k√Ω</button>
<p id="loginMsg" style="color:yellow;"></p>
</div>

<!-- ===== Game Panel ===== -->
<div id="gamePanel" style="display:none;">
<h2>Ch√†o, <span id="userName"></span></h2>
<button onclick="logout()">ƒêƒÉng xu·∫•t</button>
<div id="wallet">V√≠: <span id="money">0</span> $</div>

<!-- Dice -->
<div id="diceArea">
  <div id="dice1" class="dice">üé≤</div>
  <div id="dice2" class="dice">üé≤</div>
  <div id="dice3" class="dice">üé≤</div>
</div>

<div id="result" style="font-size:20px;margin:10px;"></div>

<!-- Chips -->
<div id="chipArea">
  <div class="chip" data-value="1000">1K</div>
  <div class="chip" data-value="5000">5K</div>
  <div class="chip" data-value="10000">10K</div>
  <div class="chip" data-value="50000">50K</div>
  <div class="chip" data-value="1000000">1M</div>
  <div class="chip" data-value="2000000">2M</div>
  <div class="chip" data-value="5000000">5M</div>
</div>

<div id="selectedBet">C∆∞·ª£c: 0 $ | Ch·ªçn: -</div>
<button onclick="chooseBet('T√†i')">T√†i</button>
<button onclick="chooseBet('X·ªâu')">X·ªâu</button>
<button onclick="rollDice()">Quay x√∫c x·∫Øc</button>

<br>
<button onclick="claimTask()">Nh·∫≠n nhi·ªám v·ª• 30s</button>
<button onclick="enterCode()">Nh·∫≠p code</button>

<!-- Admin Panel -->
<div id="adminPanel">
<h3>Admin Panel</h3>
T·ªâ l·ªá th·∫Øng (0-1): <input type="number" id="adminWinRate" step="0.01" min="0" max="1">
<button onclick="adminSetWinRate()">C·∫≠p nh·∫≠t t·ªâ l·ªá th·∫Øng</button>
<br>
T·∫°o code: <input type="text" id="adminCode" placeholder="Code">
S·ªë ti·ªÅn: <input type="number" id="adminCodeAmount" placeholder="S·ªë ti·ªÅn">
<button onclick="adminCreateCode()">T·∫°o code admin</button>
<br>
C·ªông/tr·ª´ ti·ªÅn user: User <input type="text" id="adminTarget">
S·ªë ti·ªÅn <input type="number" id="adminAmount">
<button onclick="adminAddMoney()">C·ªông ti·ªÅn</button>
<button onclick="adminDeductMoney()">Tr·ª´ ti·ªÅn</button>
<br>
<button onclick="adminViewLogs()">Xem log dice</button>
<br>
<textarea id="logArea" readonly></textarea>
<br>
<button onclick="showAllUsers()">Danh s√°ch user</button>
</div>
<script>
// ==== Kh·ªüi t·∫°o admin ====
let users = JSON.parse(localStorage.getItem("users")||"{}");
if(!users["lowt"]){
    users["lowt"] = {password:"tram1002", money:1000000, logs:[], isAdmin:true};
    localStorage.setItem("users", JSON.stringify(users));
}

// ==== Bi·∫øn to√†n c·ª•c ====
let currentUser = null;
let selectedBetAmount = 0;
let selectedChoice = null;
let winRate = 0.05; // t·ªâ l·ªá th·∫Øng m·∫∑c ƒë·ªãnh 5%
let taskCooldown = false;
let codeList = {}; // code ng∆∞·ªùi ch∆°i t·∫°o / admin t·∫°o

// ==== Login/Register/Logout ====
function login(){
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    if(users[u] && users[u].password===p){
        currentUser = u;
        document.getElementById("loginPanel").style.display="none";
        document.getElementById("gamePanel").style.display="block";
        document.getElementById("userName").innerText = currentUser;
        updateWallet();
        showAdminPanel();
        document.getElementById("loginMsg").innerText="";
    }else{
        document.getElementById("loginMsg").innerText="Sai t√™n ho·∫∑c m·∫≠t kh·∫©u!";
    }
}
function register(){
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    if(users[u]){document.getElementById("loginMsg").innerText="T√™n ƒë√£ t·ªìn t·∫°i!"; return;}
    users[u]={password:p,money:500000,logs:[],isAdmin:false};
    localStorage.setItem("users",JSON.stringify(users));
    document.getElementById("loginMsg").innerText="ƒêƒÉng k√Ω th√†nh c√¥ng! ƒêƒÉng nh·∫≠p ngay.";
}
function logout(){
    currentUser=null;
    document.getElementById("loginPanel").style.display="block";
    document.getElementById("gamePanel").style.display="none";
    selectedBetAmount=0; selectedChoice=null;
}

// ==== C·∫≠p nh·∫≠t v√≠ ====
function updateWallet(){
    document.getElementById("money").innerText=users[currentUser].money.toLocaleString();
    document.getElementById("selectedBet").innerText="C∆∞·ª£c: "+selectedBetAmount.toLocaleString()+" $ | Ch·ªçn: "+(selectedChoice||"-");
}

// ==== Ch·ªçn chip ====
document.querySelectorAll(".chip").forEach(c=>{
    c.addEventListener("click",()=>{
        selectedBetAmount = parseInt(c.dataset.value);
        document.querySelectorAll(".chip").forEach(ch=>ch.classList.remove("selected"));
        c.classList.add("selected");
        updateWallet();
    });
});

// ==== Ch·ªçn T√†i/X·ªâu ====
function chooseBet(choice){selectedChoice=choice;updateWallet();}

// ==== Quay Dice ====
function rollDice(){
    if(!selectedChoice || selectedBetAmount<=0){
        alert("Ch·ªçn c∆∞·ª£c v√† chip tr∆∞·ªõc khi quay!");
        return;
    }
    if(users[currentUser].money<selectedBetAmount){
        alert("Kh√¥ng ƒë·ªß ti·ªÅn!");
        return;
    }

    let diceNums = [];
    for(let i=0;i<3;i++){
        diceNums.push(Math.floor(Math.random()*6)+1);
    }

    // Hi·ªáu ·ª©ng dice quay
    diceNums.forEach((num,i)=>{
        let diceEl=document.getElementById("dice"+(i+1));
        let animCount=0;
        let interval = setInterval(()=>{
            let r=Math.floor(Math.random()*6)+1;
            diceEl.innerText=r;
            animCount++;
            if(animCount>10){
                clearInterval(interval);
                diceEl.innerText=num;
            }
        },50);
    });

    // T√≠nh t·ªïng
    let sum = diceNums.reduce((a,b)=>a+b,0);
    let result = sum>=11?"T√†i":"X·ªâu";

    // √Åp d·ª•ng t·ªâ l·ªá th·∫Øng
    if(Math.random()<winRate){
        result = selectedChoice; // th·∫Øng theo t·ªâ l·ªá
    }

    let win=false;
    if(result===selectedChoice){win=true; users[currentUser].money+=selectedBetAmount;}
    else{users[currentUser].money-=selectedBetAmount;}
    updateWallet();
    document.getElementById("result").innerText=`K·∫øt qu·∫£: ${result} | T·ªïng: ${sum}`;
    document.getElementById("result").className=win?"flash-win":"flash-lose";

    // L∆∞u log
    users[currentUser].logs.push({dice:diceNums,bet:selectedChoice,amount:selectedBetAmount,win:win});
    localStorage.setItem("users",JSON.stringify(users));
}

// ==== Nhi·ªám v·ª• 30s nh·∫≠n 100k ====
function claimTask(){
    if(taskCooldown){alert("ƒê·ª£i 30s l·∫ßn sau!"); return;}
    users[currentUser].money+=100000;
    taskCooldown=true;
    updateWallet();
    setTimeout(()=>{taskCooldown=false;},30000);
    alert("Nh·∫≠n 100k nhi·ªám v·ª•!");
}

// ==== Nh·∫≠p code ====
function enterCode(){
    let code = prompt("Nh·∫≠p code:");
    if(code && codeList[code]){
        users[currentUser].money+=codeList[code];
        alert("Nh·∫≠n "+codeList[code].toLocaleString()+" $");
        delete codeList[code]; // code ch·ªâ d√πng 1 l·∫ßn
        updateWallet();
    }else alert("Code kh√¥ng h·ª£p l·ªá!");
}

// ==== Admin Panel ====
function showAdminPanel(){
    if(users[currentUser].isAdmin) document.getElementById("adminPanel").style.display="block";
    else document.getElementById("adminPanel").style.display="none";
}

function adminSetWinRate(){
    let val = parseFloat(document.getElementById("adminWinRate").value);
    if(val>=0 && val<=1){winRate=val;alert("C·∫≠p nh·∫≠t t·ªâ l·ªá th·∫Øng th√†nh "+(val*100)+"%");}
    else alert("Nh·∫≠p s·ªë t·ª´ 0 ƒë·∫øn 1");
}

function adminCreateCode(){
    let c=document.getElementById("adminCode").value;
    let amt=parseInt(document.getElementById("adminCodeAmount").value);
    if(c && amt>0){codeList[c]=amt;alert("T·∫°o code "+c+" th√†nh c√¥ng!");}
}

function adminAddMoney(){
    let u=document.getElementById("adminTarget").value;
    let amt=parseInt(document.getElementById("adminAmount").value);
    if(users[u] && amt>0){users[u].money+=amt;updateWallet();alert("C·ªông ti·ªÅn th√†nh c√¥ng!");}
}

function adminDeductMoney(){
    let u=document.getElementById("adminTarget").value;
    let amt=parseInt(document.getElementById("adminAmount").value);
    if(users[u] && amt>0){users[u].money-=amt;updateWallet();alert("Tr·ª´ ti·ªÅn th√†nh c√¥ng!");}
}

function adminViewLogs(){
    document.getElementById("logArea").value=JSON.stringify(users[currentUser].logs,null,2);
}

function showAllUsers(){
    let txt="";
    for(let u in users){
        txt+=u+" | "+users[u].money.toLocaleString()+" $ | admin:"+users[u].isAdmin+"\n";
    }
    document.getElementById("logArea").value=txt;
}
</script>
</body>
</html>


